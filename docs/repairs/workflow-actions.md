---
title: Действия Workflow
---

# Действия Workflow

Действия Workflow определяют, какие кнопки и переходы доступны в карточке ремонта на канбан-доске. Они управляют навигацией по статусам и интерфейсом взаимодействия с заказами.

<!-- screenshot: список настроенных workflow-действий в настройках -->

## Принцип работы

Workflow-действия — это настраиваемые правила, определяющие поведение интерфейса при работе с ремонтами. Каждое действие привязывается к триггеру и содержит набор исходов (outcomes) — кнопок, которые будут доступны пользователю.

- Действие привязано к конкретному триггеру (событию).
- Каждое действие содержит один или несколько исходов (кнопок).
- Исходы могут быть ограничены по ролям — разные роли видят разные кнопки.

## Триггеры

В системе поддерживаются два типа триггеров.

### Клик по карточке (card_click)

Срабатывает при нажатии на карточку ремонта на канбан-доске. Определяет набор кнопок-действий, доступных при открытии карточки.

### Переход в статус (transition_in)

Срабатывает при попадании ремонта в определённый статус. Определяет, какие действия (кнопки перехода) доступны из этого статуса.

## Исходы (outcomes)

Каждое workflow-действие содержит массив исходов. Исход — это кнопка, которая отображается пользователю и выполняет переход в целевой статус или сохранение данных.

Параметры исхода:

- **Код** — уникальный идентификатор исхода.
- **Название** — текст на кнопке (например, «В диагностику», «Согласовать», «Сохранить»).
- **Целевой статус** — статус, в который перейдёт ремонт при нажатии (может быть пустым для действия «Сохранить»).
- **Стиль кнопки** — визуальное оформление (success, warning, danger, secondary).
- **Основная кнопка** — если отмечена, кнопка отображается как основная; остальные — в выпадающем меню.
- **Обязательный комментарий** — если включён, при нажатии система потребует ввести комментарий.
- **Допустимые роли** — список ролей, которым доступен этот исход. Если не задано, доступен всем.

<!-- screenshot: настройка исходов workflow-действия -->

{% note info %}

Workflow-действия определяют интерфейс работы с ремонтами — какие кнопки видит сотрудник и какие переходы может совершить. Автоматические действия (уведомления, списание запчастей) настраиваются отдельно.

{% endnote %}

## Настройка действий

Настройка workflow-действий выполняется администратором в разделе настроек.

<!-- screenshot: форма настройки нового workflow-действия -->

- **Название** — описание действия для администратора.
- **Триггер** — выбор типа события (card_click или transition_in).
- **Статус** — для transition_in указывается, в каком статусе срабатывает действие.
- **Исходы** — набор кнопок с целевыми статусами и параметрами.

{% note warning %}

Тестируйте workflow-действия на тестовых ремонтах перед применением к реальным заказам. Некорректно настроенные переходы могут нарушить рабочий процесс.

{% endnote %}
