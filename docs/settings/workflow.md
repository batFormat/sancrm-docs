---
title: Workflow
---

# Workflow

Workflow позволяет настроить поведение интерфейса при работе с ремонтами — какие кнопки видит сотрудник, какие переходы между статусами доступны и при каких условиях.

<!-- screenshot: список правил workflow в настройках -->

## Принцип работы

Каждое правило Workflow привязано к триггеру и содержит набор исходов (outcomes) — кнопок, которые отображаются сотруднику. Исходы определяют, в какой статус можно перевести ремонт и какие кнопки видны на карточке.

## Триггеры

В системе поддерживаются два типа триггеров.

- **Клик по карточке (card_click)** — определяет набор кнопок, отображаемых при открытии карточки ремонта на канбан-доске.
- **Переход в статус (transition_in)** — определяет действия и кнопки, доступные при попадании ремонта в определённый статус.

## Исходы (outcomes)

Каждое правило содержит массив исходов — кнопок для сотрудника.

Параметры исхода:

- **Код и название** — идентификатор и текст кнопки.
- **Целевой статус** — статус, в который перейдёт ремонт при нажатии. Может быть пустым для действия «Сохранить».
- **Стиль кнопки** — визуальное оформление (success, warning, danger, secondary).
- **Основная кнопка** — основная отображается крупно, остальные — в выпадающем меню.
- **Обязательный комментарий** — если включён, система потребует комментарий при нажатии.
- **Допустимые роли** — список ролей, которым доступна кнопка.
- **Активность** — исход можно деактивировать.

<!-- screenshot: форма настройки исходов -->

{% note info %}

Workflow управляет интерфейсом и переходами статусов. Автоматических действий (уведомления, списание запчастей) в текущей версии workflow не выполняет.

{% endnote %}

## Настройка

Настройка Workflow выполняется администратором в разделе настроек.

- Укажите название правила для удобства идентификации.
- Выберите триггер (card_click или transition_in).
- Добавьте исходы (кнопки) с целевыми статусами и параметрами.
- Настройте ограничения по ролям для каждого исхода.

{% note warning %}

Тестируйте workflow-правила перед применением к реальным заказам. Некорректно настроенные исходы могут нарушить рабочий процесс сотрудников.

{% endnote %}
