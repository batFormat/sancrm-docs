---
title: Workflow
---

# Workflow

Workflow позволяет автоматизировать рутинные действия при изменении статуса ремонта. Вместо ручного выполнения повторяющихся операций система автоматически отправляет уведомления, назначает исполнителей, создаёт задачи и выполняет другие действия.

<!-- screenshot: список правил workflow с индикаторами активности -->

## Создание правила

Каждое правило Workflow состоит из триггера, условий и действий. При срабатывании триггера система проверяет условия и, если они выполнены, запускает указанные действия.

- Нажмите кнопку создания нового правила.
- Задайте понятное название, описывающее суть автоматизации (например, «Уведомить клиента о готовности»).

<!-- screenshot: форма создания нового правила workflow -->

## Триггеры

Триггер определяет событие, при котором правило должно сработать. Основной триггер — смена статуса ремонта.

- **Смена статуса** — правило срабатывает при переходе ремонта из одного статуса в другой. Можно указать конкретные статусы «откуда» и «куда».
- **Создание ремонта** — правило срабатывает при создании нового заказа.
- **Назначение исполнителя** — правило срабатывает при назначении или смене мастера.

{% note info %}

Для одного события можно настроить несколько правил. Они будут выполнены последовательно в порядке приоритета.

{% endnote %}

<!-- screenshot: выбор триггера — выпадающий список событий -->

## Условия

Условия позволяют ограничить срабатывание правила дополнительными критериями. Если условия не заданы, правило срабатывает при каждом наступлении триггера.

- **Филиал** — правило срабатывает только для ремонтов определённого филиала.
- **Категория устройства** — правило срабатывает для устройств определённой категории.
- **Исполнитель** — правило срабатывает при назначении конкретного сотрудника.
- **Сумма ремонта** — правило срабатывает при превышении указанной суммы.

<!-- screenshot: настройка условий срабатывания правила -->

## Действия

Действие определяет, что система должна выполнить при срабатывании правила. К одному правилу можно привязать несколько действий.

### Уведомления

- **SMS клиенту** — отправка SMS-сообщения с информацией о статусе ремонта.
- **Email клиенту** — отправка электронного письма на email клиента.
- **Telegram клиенту** — отправка сообщения через Telegram-бот.
- **Уведомление сотруднику** — push-уведомление или email ответственному мастеру.

### Изменение данных

- **Назначить исполнителя** — автоматическое назначение мастера на ремонт.
- **Установить срок** — установка или пересчёт срока готовности.
- **Добавить комментарий** — автоматическое добавление записи в историю ремонта.

<!-- screenshot: конструктор действий — список доступных типов -->

## Порядок выполнения правил

Если на одно событие настроено несколько правил, они выполняются в порядке приоритета. Перетащите правила в списке для изменения порядка выполнения.

{% note warning %}

Убедитесь, что правила не конфликтуют друг с другом. Например, два правила, назначающих разных исполнителей на одно и то же событие, приведут к тому, что применится результат последнего правила.

{% endnote %}

<!-- screenshot: перетаскивание правил для изменения порядка -->

## Включение и отключение правил

Каждое правило можно временно отключить, не удаляя его. Это удобно для тестирования новых автоматизаций или временного отключения уведомлений.

<!-- screenshot: переключатель активности правила -->
